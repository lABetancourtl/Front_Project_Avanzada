<div class="categoria-container">
  <h2>ğŸ“ GestiÃ³n de CategorÃ­as</h2>

  <form [formGroup]="formulario" (ngSubmit)="guardarCategoria()" class="categoria-form">
    <input type="text" formControlName="nombre" placeholder="Nombre de la categorÃ­a" />

    <select formControlName="icono">
      <option value="">Sin icono</option>
      <optgroup label="Seguridad">
        <option value="ğŸš”">ğŸš” Robo o actividad delictiva</option>
      </optgroup>
      <optgroup label="Emergencias mÃ©dicas">
        <option value="ğŸš‘">ğŸš‘ Accidente, desmayo</option>
      </optgroup>
      <optgroup label="Infraestructura">
        <option value="ğŸš§">ğŸš§ VÃ­a cerrada, hueco, alumbrado</option>
      </optgroup>
      <optgroup label="Mascotas">
        <option value="ğŸ¶">ğŸ¶ Mascotas perdidas o encontradas</option>
      </optgroup>
      <optgroup label="Comunidad">
        <option value="ğŸ—‘ï¸">ğŸ—‘ï¸ Basura, contaminaciÃ³n</option>
      </optgroup>
    </select>

    <button type="submit" [disabled]="formulario.invalid">
      {{ modoEdicion ? 'Actualizar' : 'Crear' }}
    </button>

    <button type="button" *ngIf="modoEdicion" (click)="cancelarEdicion()" class="cancelar">
      Cancelar
    </button>
  </form>

  <div *ngIf="cargando" class="loader">Cargando categorÃ­as...</div>

  <table *ngIf="!cargando && categorias.length" class="tabla-categorias">
    <thead>
      <tr>
        <th>Icono</th>
        <th>Nombre</th>
        <th>Acciones</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let cat of categorias">
        <td title="{{ cat.icono }}">{{ cat.icono || 'â€”' }}</td>
        <td>{{ cat.nombre }}</td>
        <td>
          <button (click)="editarCategoria(cat)">âœï¸</button>
          <button (click)="eliminarCategoria(cat)">ğŸ—‘ï¸</button>
        </td>
      </tr>
    </tbody>
  </table>

  <div *ngIf="!cargando && categorias.length === 0" class="no-result">
    No hay categorÃ­as registradas.
  </div>
</div>
